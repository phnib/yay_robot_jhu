import pathlib
import numpy as np

"""
Directions: set task name, action mode (e.g. hybrid, ego, etc), and the correct normalization params (usually just mean/std).
Make sure action mode is exactly what you want!
"""


### Task parameters
DATA_DIR = "/home/jchen396/scr4_akriege1/chole/chole_dataset"

TASK_CONFIGS = {
    'base_chole_clipping_cutting':{
        'dataset_dir': DATA_DIR + "/base_chole_clipping_cutting/",
        'num_episodes': 200,
        'tissue_samples_ids': [1, 4],
        'camera_file_suffixes':  ["_left.jpg", "_right.jpg", "_psm1.jpg", "_psm2.jpg"],
        'episode_len': 400, # not to be confused with number of demos
        'action_mode': ['hybrid', 
                        {'max_': np.array([0.02375182, 0.02045474, 0.02108023, 1.        , 0.99563164,
                                        0.91924004, 0.99582772, 1.        , 0.8632355 , 1.42631945,
                                        0.01603716, 0.01864712, 0.02314806, 1.        , 0.99605926,
                                        0.669374  , 0.92886248, 1.        , 0.72124946, 1.25202274]), # jaw angle

                        'min_': np.array([-0.02807084, -0.01803029, -0.01694217, -0.52108483, -0.9445956 ,
                                        -0.58891274, -0.87099595, -0.72066514, -0.66530012, -0.349066  ,
                                        -0.02152792, -0.01365673, -0.01062903, -0.71263727, -0.99287953,
                                        -0.70212741, -0.99898118, -0.70104911, -0.90225085, -0.349066  ]), # jaw angle

                        'mean': np.array([-1.07592371e-03,  6.39197726e-04,  1.33060653e-03,  9.87509484e-01,
                                            2.66880921e-02,  2.47990212e-02, -2.24158183e-02,  9.87458769e-01,
                                        -1.40400757e-02, -2.64201908e-01, -2.21153217e-04,  8.88786546e-04,
                                            1.59460341e-03,  9.77774663e-01, -2.50561688e-02, -5.64664921e-02,
                                            9.36258713e-03,  9.74861881e-01, -2.83120580e-02,  7.98996343e-02]),

                        'std': np.array([0.01      , 0.01      , 0.01      , 0.04015769, 0.11603744,
                                        0.09176298, 0.11696651, 0.04197459, 0.0937153 , 0.25823267,
                                        0.01      , 0.01      , 0.01      , 0.05489695, 0.1381363 ,
                                        0.13433212, 0.12634808, 0.05780851, 0.17160833, 0.392284]) }],
                        
        'norm_scheme': 'std',
        'save_frequency': 250,
        'camera_names': ['left', 'right', 'left_wrist', 'right_wrist'],
    },

    'knot_tying_ego':{ # tool-centric relative motion
        'dataset_dir': '../diffusion_policy/brian_knot_tying_12_26_and_27_2023',
        'num_episodes': 512, # number of demos
        'episode_len': 400, # not to be confused with number of demos
        'action_mode': ['ego', 
                        {'mean': np.array([-5.95430641e-04,  2.79659945e-03,  2.78562571e-03,  9.87360668e-01,
                                2.63163186e-02,  2.44319472e-02, -2.26926952e-02,  9.89679019e-01,
                                1.60073543e-02, -2.64201908e-01,  3.18628875e-03,  1.28132707e-03,
                                3.39793773e-03,  9.70006045e-01, -2.84740735e-02,  5.64430390e-02,
                                1.88001163e-02,  9.85573224e-01,  5.28237521e-03,  7.98996343e-02]),

                        'std': np.array([0.01      , 0.01      , 0.01      , 0.03456929, 0.10084489,
                                0.11164549, 0.10634934, 0.0294502 , 0.08710194, 0.25823267,
                                0.01164498, 0.01      , 0.01      , 0.05931777, 0.11510065,
                                0.19576753, 0.1137855 , 0.03832156, 0.11767919, 0.392284  ]) }],
                        
        'norm_scheme': 'std',
        'save_frequency': 400,
        'camera_names': ['left', 'right', 'left_wrist', 'right_wrist'], 
    },

    'needle_pickup_handover_hybrid':{
        'dataset_dir': '../diffusion_policy/brian_needle_pickup_handover',
        'num_episodes': 240,
        'episode_len': 400,
        'action_mode': ['hybrid', 
                        {'max_': np.array([0.02184909, 0.011936  , 0.01483935, 1.        , 0.99996195,
                        0.41603338, 0.97735615, 1.        , 0.94899971, 1.40146157,
                        0.02553431, 0.02539591, 0.02646763, 1.        , 0.96923362,
                        0.9706872 , 0.99899981, 1.        , 0.86763858, 1.32403904]), # jaw angle

                        'min_': np.array([-0.01979794, -0.01506985, -0.01563597, -0.79181285, -0.99567573,
                            -0.60622445, -0.97014993, -0.51231733, -0.52347339, -0.349066  ,
                            -0.02795868, -0.02831652, -0.02433966, -0.75809375, -0.99999913,
                            -0.85638976, -0.99998054, -0.64346645, -0.99875995, -0.349066  ]), # jaw angle

                        'mean': np.array([ 3.77172801e-04,  5.40193668e-04, -3.07943372e-04,  9.64331747e-01,
                                6.48567119e-02, -6.05905653e-02, -5.95566050e-02,  9.74167682e-01,
                                3.00788400e-02,  2.32636484e-01,  1.02653741e-03, -1.38396904e-03,
                            -6.15873639e-04,  7.97580095e-01, -5.30733606e-02,  7.09823332e-02,
                            -5.53770458e-02,  8.27865035e-01, -1.42531662e-01,  1.42044122e-01]),

                        'std': np.array([0.01      , 0.01      , 0.01      , 0.13200805, 0.17482619,
                                0.11914843, 0.15749718, 0.10761118, 0.10079719, 0.58397368,
                                0.01      , 0.01      , 0.01      , 0.26914296, 0.41626929,
                                0.33210339, 0.39331887, 0.2171201 , 0.29902629, 0.52855681]) }],
                        
        'norm_scheme': 'std',
        'save_frequency': 400,
        'camera_names': ['left', 'right', 'left_wrist', 'right_wrist'],
    },

    'needle_pickup_handover_ego':{
        'dataset_dir': '../diffusion_policy/brian_needle_pickup_handover',
        'num_episodes': 240,
        'episode_len': 400,
        'action_mode': ['ego', 
                        {'mean': np.array([ 3.77172801e-04,  5.40193668e-04, -3.07943372e-04,  9.64331747e-01,
                                6.48567119e-02, -6.05905653e-02, -5.95566050e-02,  9.74167682e-01,
                                3.00788400e-02,  2.32636484e-01,  1.02653741e-03, -1.38396904e-03,
                            -6.15873639e-04,  7.97580095e-01, -5.30733606e-02,  7.09823332e-02,
                            -5.53770458e-02,  8.27865035e-01, -1.42531662e-01,  1.42044122e-01]),

                        'std': np.array([0.01      , 0.01      , 0.01      , 0.13200805, 0.17482619,
                                0.11914843, 0.15749718, 0.10761118, 0.10079719, 0.58397368,
                                0.01      , 0.01      , 0.01      , 0.26914296, 0.41626929,
                                0.33210339, 0.39331887, 0.2171201 , 0.29902629, 0.52855681]) }],
                        
        'norm_scheme': 'std',
        'save_frequency': 500,
        'camera_names': ['left', 'right', 'left_wrist', 'right_wrist'],
    },



    'tissue_lift_hybrid':{
        'dataset_dir': '../diffusion_policy/tissue_lift_dataset',
        'num_episodes': 225,
        'episode_len': 400,
        'action_mode': ['hybrid', 
                        {'max_': np.array([9.58660137e-04, 1.75706492e-03, 3.64667092e-03, 1.00000000e+00,
                            3.86978489e-02, 1.18860762e-01, 1.24669370e-02, 1.00000000e+00,
                            4.69644806e-02, 1.17910816e+00, 1.09582952e-02, 2.93239996e-02,
                            1.61841069e-02, 1.00000000e+00, 9.05215216e-01, 6.33072174e-01,
                            8.22567627e-01, 1.00000000e+00, 6.66133118e-01, 1.20431394e+00]), # jaw angle

                        'min_': np.array([-1.24455611e-03, -8.94456938e-04, -8.40753279e-04,  9.92575536e-01,
                            -1.17187559e-02, -5.26328010e-02, -3.87794124e-02,  9.84983897e-01,
                            -1.72568916e-01, -1.16398991e-01, -1.91699568e-02, -1.28107500e-02,
                            -1.13766139e-02, -1.32009680e-01, -8.52134505e-01, -3.83912177e-01,
                            -9.99390286e-01, -2.12526976e-01, -3.34999517e-01, -3.49066000e-01]), # jaw angle

                        'mean': np.array([ 7.59205407e-05, -2.30885496e-06,  1.97906328e-05,  9.99976275e-01,
                            9.90840926e-04, -2.51372110e-03, -9.69670597e-04,  9.99973194e-01,
                            -1.24184505e-03,  5.12196052e-01, -6.29079377e-04,  6.28547218e-03,
                            4.81375355e-04,  9.87041569e-01,  9.90184806e-03, -2.15537452e-02,
                            -5.30152295e-03,  9.74030187e-01,  1.27136659e-01, -1.35342473e-01]),

                        'std': np.array([0.01      , 0.01      , 0.01      , 0.01      , 0.01      ,
                            0.01      , 0.01      , 0.01      , 0.01      , 0.21891318,
                            0.01      , 0.01      , 0.01      , 0.0437599 , 0.1250483 ,
                            0.08737462, 0.13089845, 0.05398924, 0.1225729 , 0.40920205]) }],
                        
        'norm_scheme': 'std',
        'save_frequency': 400,
        'camera_names': ['left', 'right', 'left_wrist', 'right_wrist'],
    },
}
